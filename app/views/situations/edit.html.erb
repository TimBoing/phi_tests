<div class="container centered-vertically">



  <div class="choices-container">
    <% @child_choices.each_with_index do |choice, index| %>
      <p>Choice <%= index +1 %> : <%= choice.description %></p>
      <% if choice.next_situation %>
        <%= link_to "Go", story_situation_path(@story, choice.next_situation) %>
      <% else %>
        <%= link_to "Choose",  new_story_situation_path(choice: choice.id) %>
      <% end %>
        <%= link_to "-", story_situation_choice_path(@story, @situation, choice), method: :delete, data: { confirm: "Are you sure?" }, class: "no-class" %>
    <% end %>


  </div>



</div>


<div class="structure-container">

  <div class="structure-sidenav">

    <% if @previous_situation %>
      <%= link_to edit_story_situation_path(@story, @previous_situation) do %>
        <i class="fas fa-backward"></i>
      <% end %>
    <% else %>
      <%= link_to story_path(@story) do %>
        <i class="fas fa-backward"></i>
      <% end %>
    <% end %>

    <%= link_to story_situation_path(@story, @situation) do %>
      <i class="fas fa-book-open"></i>
    <% end %>


    <%= link_to stories_path do %>
      <i class="fas fa-home"></i>
    <% end %>

  </div>

  <div class="structure-content">

    <div class="structure-title-container">
      <h2><%= @story.name %></h2>
    </div>

    <div class="rounded-container">
      <%= simple_form_for [ @story, @situation ] do |f| %>
        <%= f.label :description, "Edit Situation" %>
        <%= f.input :description, :as => :text, label: false, :input_html => { class: "situation-container" } %>
        <%= f.button :submit, "Submit changes", class: "oval-bordered-button" %>
      <% end %>
    </div>

    <div class="choices">

      <% @child_choices.each_with_index do |choice, index| %>
        <% if choice.next_situation %>
          <%= link_to edit_story_situation_path(@story, choice.next_situation) do  %>
            <div class="rounded-container choice">
              <h3>Choice <%= index +1 %></h3>
              <p><%= choice.description %></p>
              <div class="choice-ico green">
                <i class="fas fa-circle"></i>
              </div>
            </div>

          <% end %>
        <% else %>
          <%= link_to new_story_situation_path(@story, choice: choice.id) do  %>
            <div class="rounded-container choice">
              <h3>Choice <%= index +1 %></h3>
              <p><%= choice.description %></p>
              <div class="choice-ico red">
                <i class="fas fa-circle"></i>
              </div>

            </div>
          <% end %>
        <% end %>
      <% end %>

    </div>


    <div class="rounded-container">
      <%= simple_form_for [ @story, @situation, @choice ] do |f| %>
        <%= f.label :description, "Add a new choice" %>
        <%= f.input :description, label: false %>
        <%= f.button :submit, "Add a choice", class: "oval-bordered-button" %>
      <% end %>
    </div>

  </div>

</div>


